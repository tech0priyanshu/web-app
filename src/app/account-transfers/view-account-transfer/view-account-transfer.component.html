<!--
  Copyright since 2025 Mifos Initiative

  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<div class="container">
  <div class="container m-b-20 align-end gap-2px">
    @if (!viewAccountTransferData.reversed) {
      <span>
        <button mat-raised-button color="warn" *mifosxHasPermission="'ADJUST_ACCOUNTTRANSFER'">
          <fa-icon icon="undo" class="m-r-10"></fa-icon>{{ 'labels.buttons.Undo' | translate }}
        </button>
      </span>
    }
  </div>

  <mat-card>
    <mat-card-content>
      <div class="transfer-container">
        <div class="status-indicator" [ngClass]="transactionColor()"></div>

        <!-- Transaction Details Section -->
        <section class="transfer-section">
          <h3 class="section-title">{{ 'labels.heading.Transaction Details' | translate }}</h3>
          <mat-divider></mat-divider>

          <div class="info-grid">
            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Transaction Amount' | translate }}:</span>
              <span class="info-value">
                {{ viewAccountTransferData.currency?.displaySymbol }}
                {{ viewAccountTransferData.transferAmount | formatNumber }} ({{
                  viewAccountTransferData.currency?.code
                }})
              </span>
            </div>

            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Transaction Date' | translate }}:</span>
              <span class="info-value">{{ viewAccountTransferData.transferDate | dateFormat }}</span>
            </div>

            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Destination' | translate }}:</span>
              <span class="info-value">{{ viewAccountTransferData.transferDescription }}</span>
            </div>
          </div>
        </section>

        <section class="transfer-section">
          <h3 class="section-title">{{ 'labels.heading.Transferred From' | translate }}</h3>
          <mat-divider></mat-divider>

          <div class="info-grid">
            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Office' | translate }}:</span>
              <span class="info-value">{{ viewAccountTransferData.fromOffice?.name }}</span>
            </div>

            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Client' | translate }}:</span>
              <span class="info-value">{{ viewAccountTransferData.fromClient?.displayName }}</span>
            </div>

            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Account Type' | translate }}:</span>
              <span class="info-value" *ngIf="viewAccountTransferData.fromAccountType?.value">
                {{ 'labels.catalogs.' + viewAccountTransferData.fromAccountType.value | translate }}
              </span>
            </div>

            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Account No' | translate }}:</span>
              <span class="info-value">{{ viewAccountTransferData.fromAccount?.accountNo }}</span>
            </div>
          </div>
        </section>

        <section class="transfer-section">
          <h3 class="section-title">{{ 'labels.heading.Transferred To' | translate }}</h3>
          <mat-divider></mat-divider>

          <div class="info-grid">
            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Office' | translate }}:</span>
              <span class="info-value">{{ viewAccountTransferData.toOffice?.name }}</span>
            </div>

            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Client' | translate }}:</span>
              <span class="info-value">
                <a [href]="transferToClient(viewAccountTransferData.toClient)">
                  {{ viewAccountTransferData.toClient?.displayName }}
                </a>
              </span>
            </div>

            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Account Type' | translate }}:</span>
              <span class="info-value" *ngIf="viewAccountTransferData.toAccountType?.value">
                {{ 'labels.catalogs.' + viewAccountTransferData.toAccountType.value | translate }}
              </span>
            </div>

            <div class="info-row">
              <span class="info-label">{{ 'labels.inputs.Account No' | translate }}:</span>
              <span class="info-value">
                <a [href]="transferToAccount(viewAccountTransferData.toClient, viewAccountTransferData.toAccount)">
                  {{ viewAccountTransferData.toAccount?.accountNo }}
                </a>
              </span>
            </div>
          </div>
        </section>
      </div>
    </mat-card-content>

    <mat-card-actions class="layout-row align-center gap-5px responsive-column">
      <button type="button" color="primary" mat-raised-button (click)="goBack()">
        {{ 'labels.buttons.Back' | translate }}
      </button>
    </mat-card-actions>
  </mat-card>
</div>
